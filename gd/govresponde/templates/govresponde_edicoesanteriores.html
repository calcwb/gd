{% extends "govresponde.html" %}

{% block js %}
<script src="{{ url_for('.static', filename='js/govresponde_questions.js') }}"></script>
{% endblock %}

{% block rcolumn %}

<h1 class="respgov">Respostas do Governador</h1>
<div class="highlight questions">
  <ul>
    {% for contrib in contribs %}
    {% set date = contrib.answered_at.strftime('%d/%m/%Y') %}

    <li>
      <div>
        <h3 class="respgov">{{ contrib.theme.name }}</h3>
      </div>  
	
      <a href="{{ url_for('.results', rid=contrib.id) }}" class="respgov title">
        {{ contrib.title }} 
        <p class="qdate">{{ date }} - ({{ contrib.real_score }} votos) </p>
      </a>      

      <div class="respgov_balao">
 	{{ contrib.content[:300]|safe }}
 	{% if contrib.content|safe|length > 300 %}
        ...
	<a href="{{ url_for('.results', rid=contrib.id) }}">[continue lendo]</a>
	{% endif %}
        <h4>Pergunta</h4>
      </div> 

      {% if contrib.video  %}
      <div class="video">
        <a href="javascript:;" onclick='video.play({{ contrib.video|tojson|safe }})'>
          <div class="container">
            <img class="thumb"
                 src="{{ contrib.video.thumbnail }}" alt="{{ contrib.video.title }}"
                 width="300" height="190">
            <img src="../static/imgs/play.png" class="play">
          </div>
        </a>
        <a href="{{ url_for('videos.details', vid=contrib.video.id) }}"
           class="permalink">
          <img src="{{ url_for('static', filename='imgs/permalink.png') }}"
               alt="Permanet link">
        </a>
      </div>
      {% endif %}
    
      <div class="answerlink">
        <a href="{{ url_for('.results', rid=contrib.id) }}"
           class="encaminhamento">
          Encaminhamentos
        </a>
        {% if contrib.aggregated %}
        <a href="javascript:;"
         onclick="showAggregated({{ contrib.id  }})"
         class="otherquestions">
        Demais perguntas inclu√≠das
      </a>
      <ul id="aggregated-{{ contrib.id }}" class="aggregated">
        {% for ag in contrib.aggregated %}
        <li>
          <strong>{{ ag.title }}</strong>
          <p class="desc">{{ ag.content }}</p>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      </div>



    </li>
    {% endfor %}
  </ul>
  
  <div class="row-end">
  </div>
</div>
{% if pagination.pages > 1 %}
	<div class="questions">
  	<ol class="pagination">
    {% for i in range(pagination.pages) %}
    	<li {% if pagination.page == i %}class="selected"{% endif %}>
      		<a href="?pg=todos&theme={{ theme.id }}&page={{ i }}">
        		{{ i+1 }}
      		</a>
    	</li>
    {% endfor %}
  	</ol>
  	</div>
  	{% endif %}
{% endblock %}
