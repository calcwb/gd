{% extends "govresponde.html" %}

{% block js %}
<script src="{{ url_for('static', filename='js/govresponde/govresponde_questions.js') }}"></script>
<script src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4ddba96024e86089"></script>
{% endblock %}

{% block rcolumn %}

<div class="questions">
  <div class="head">
    <h1 class="questions">{% if theme %}{{ theme.name }}{% endif %}</h1>
    <form id="filterform" method="get" action="{{ url_for('.questions') }}">
      <input type="hidden" name="theme" value="{{ theme.id }}">
      <select name="sortby" onchange="$('#filterform').submit()">
        <option value="">filtros</option>
        <option
           {% if sortby == '-date' %}selected="selected"{% endif %}
           value="-date">
          Mais recentes
        </option>
        <option
           {% if sortby == 'date' %}selected="selected"{% endif %}
           value="date">
          Mais antigas
        </option>
        <option
           {% if sortby == '-score' %}selected="selected"{% endif %}
           value="-score">
          Mais votadas
        </option>
        <option
           {% if sortby == 'score' %}selected="selected"{% endif %}
           value="score">
          Menos votadas
        </option>
      </select>
    </form>
  </div>
  <ul>
    {% for question in questions %}
    <li id="question-{{ question.id }}">
      {% include "govresponde_question.part.html" %}
    </li>
    {% endfor %}
  </ul>

  {% if pagination.pages > 1 %}
  <ol class="pagination">
    {% for i in range(pagination.pages) %}
    <li {% if pagination.page == i %}class="selected"{% endif %}>
      <a href="{{ url_for('.questions') }}?theme={{ theme.id }}&page={{ i }}&sortby={{sortby}}">
        {{ i+1 }}
      </a>
    </li>
    {% endfor %}
  </ol>
  {% endif %}
</div>

{% endblock %}
