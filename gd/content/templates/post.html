{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('.static', filename='css/blog.css') }}">
{% endblock %}

{% block content %}
<div id="container">
  <div class="row">
    <div id="post" class="col8">
      <div id="news">
          <h1>{{ post.title }}</h1>
          <div class="postcontent">
            {{ post.content|safe }}
            {% for comment in comments %}
                {{ comment.author|safe }} <br>
                {{ comment.author_email|safe }} <br>
                {{ comment.date_created_gmt|safe }} <br>
                {{ comment.link|safe }} <br>
                {{ comment.content|safe }} <br>
            {% endfor %}
            {% if post.comments.allow_comments == 1 %}
              {% set display_form = 'inline' if show_comment_form else 'None' %}
              <!-- the comemnt error msg -->
              {{ error_msg|safe }}

              <form style="display:{{ display_form }}"
                    id="blog_comment_form"
                    action="{{ url_for('new_comment') }}"
                    method="POST">

                <input type="hidden" name="post_id" value="{{post.id}}">
                Comentário:<textarea name="content"></textarea>
                <input type="submit" value="Enviar">
              </form>
            {% endif %}
          </div>
      </div>
    </div>
    <div id="sidebar" class="col4">
      <div id="wordpress-sidebar-1">
        {{ sidebar|safe }}
      </div>
      <div id="tag-cloud">
        <ul>
          {% for t in tags %}
          <li>
            <a
               href="{{ url_for('tag', slug=t.slug) }}"
               style="font-size:{{ t.size }};">{{ t.name }}</a>
          </li>
          {% endfor %}
        </ul>
      </div>

      <div id="recent-topics">
        <h3>Outras notícias</h3>
        <ol>
          {% for p in recent_posts %}
            <li>
                <a href="/post/{{p.id}}">{{ p.title|safe }}</a>
            </li>
          {% endfor %}
        </ol>
      </div>
   </div>
  </div>
  <div class="row-end"></div>
</div>
{% endblock %}
