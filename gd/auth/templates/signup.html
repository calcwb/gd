{% macro fielderrors(field) -%}
    {%- if field.errors %}
      {%- for error in field.errors %}
        <p class="errmsg name-error alert alert-error">{{error}}</p><br>
      {%- endfor %}
    {%- endif %}
{%- endmacro %}

{% extends "base.html" %}

{% block css %}
{% endblock %}

{% block javascript %}
{% endblock %}


{% block content %}
<div class="container">
  <div class="row">
    {%include 'parts/flashes.html'%}
  </div>
  <div class="row novocadastro">
    <div class="offset1 span10">
      <form class="form-horizontal" method="post" id="signup" action=".">
        <fieldset>
          <legend>Novo cadastro:</legend>

      {{ form.csrf }}
      <div id="auth-error" class="msg error alert alert-error hide"></div>
      <div id="auth-success" class="msg success alert alert-success hide"></div>
      <div class="msg error"></div>
      <div class="msg success"></div>
      <!-- <div class="signup-form"> -->
      {% if form.social %}
      <div class="alert">
        Você está se autenticando através de uma rede social. Para
        terminar o processo falta apenas preencher os campos abaixo.
      </div>
      {% endif %}

        <div class="control-group">
          {{ form.name.label(class='control-label') }}
          <div class="controls">
            {{ form.name(class='span6') }}
          </div>
          {{fielderrors(form.name)}}
        </div>

        <div class="control-group">
          {{ form.email.label(class='control-label')  }}
          <div class="controls">
            {{ form.email(class='span6') }}
          </div>
          {{fielderrors(form.email)}}
        </div>

        <div class="control-group">
          {{ form.email_confirmation.label(class='control-label') }}
          <div class="controls">
            {{ form.email_confirmation(class='span6') }}
          </div>
          {{fielderrors(form.email_confirmation)}}
        </div>

        {% if not form.social %}
        <div class="control-group">
          {{ form.password.label(class='control-label') }}
          <div class="controls">
            {{ form.password }}
          </div>
          {{fielderrors(form.password)}}
        </div>

        <div class="control-group">
          {{ form.password_confirmation.label(class='control-label') }}
          <div class="controls">
            {{ form.password_confirmation }}
          </div>
          {{fielderrors(form.password_confirmation)}}
        </div>
        {% endif %}

        <div class="control-group">
          {{ form.state.label(class='control-label') }}
          <div class="controls">
            {{ form.state }}
          </div>
          {{fielderrors(form.state)}}
        </div>
        <div class="control-group">
          {{ form.city.label(class='control-label') }}
          <div class="controls">
            {{ form.city }}
          </div>
          {{fielderrors(form.city)}}
        </div>

        <div class="control-group">

          <div class="controls">
            <label for="accept_tos" class="checkbox maior"><input type="checkbox" value="y" name="accept_tos" id="accept_tos" checked="checked">Você leu e aceitou nossos <a href="javascript:showTos();">Termos de uso</a>?</label>
          </div>

        </div>

        <div class="control-group">
          <div class="controls">
            <label for="receive_email" class="maior checkbox" class='control-label'>
            <input type="checkbox" value="y" name="receive_email" id="receive_email" checked="checked">
            Quero receber atualizações por email.</label>
            <p class="errmsg receive_email-error"></p>
          </div>
        </div>

        <div class="control-group">
          <div class="controls">
            <label for="receive_sms" class="checkbox maior" class='control-label'>
              <input type="checkbox" value="y" name="receive_sms" id="receive_sms" checked="checked">
              Quero receber atualizações por SMS.
            </label>
            <p class="errmsg receive_sms-error"></p>
          </div>
        </div>


        <h4>Opcional</h4>

        <div class="control-group">
          {{ form.phone.label(class='control-label') }}
          <div class="controls">
            {{ form.phone }}
          </div>
          {{fielderrors(form.phone)}}
        </div>


        <div class="control-group">
          {{ form.gender.label(class='control-label') }}
          <div class="controls">
            {{ form.gender }}
          </div>
          {{fielderrors(form.gender)}}
        </div>

        <div class="control-group">

          {{ form.age_group.label(class='control-label') }}
          <div class="controls">
            {{ form.age_group }}
          </div>
          {{fielderrors(form.age_group)}}
        </div>

        <div class="control-group">
          {{ form.twitter.label(class='control-label') }}
          <div class="controls">
            {{ form.twitter }}
          </div>
          {{fielderrors(form.twitter)}}
        </div>

        <div class="control-group">
          <a href="{{url_for('.login')}}">Efetuar login</a>
          <input type="submit" class="btn pull-right" value="Cadastrar">
        </div>

        </fieldset>
      </form>
    </div>
  </div>
</div>
{% endblock %}
