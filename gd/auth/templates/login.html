{% extends "base.html" %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('.static', filename='css/auth.css') }}">
{% endblock %}

{% block javascript %}
<!-- <script src="{{ url_for('.static', filename='js/login.js') }}"></script> -->
{% endblock %}

{% block bodyclass %}login{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    {%include 'parts/flashes.html'%}
  </div>
  <div class="row efetuarlogin">
    <div class="offset1 span7">
      <div id="auth-error" class="msg error"></div>
      <div id="confirmation-success" class="msg success"></div>

      <form class="form-horizontal" method="post" id="login" action="{{ url_for('auth.logon') }}">
        <fieldset>
          <legend>Efetuar login no site:</legend>
          <input type="hidden" name="next" value="{{next}}">
          <div class="control-group">
            <label for="username" class='control-label'>Email</label>
            <div class="controls">
              <input class='span4' id="username" type="text" name="username">
            </div>
          </div>

          <div class="control-group">
            <label for="password" class='control-label'>Senha</label>
            <div class="controls">
              <input id="password" class='span4' type="password" name="password">
            </div>
          </div>

<!--           <div class="control-group">
            <div class="controls">
              <label for="lembrarme" class="checkbox" class='control-label'>
                <input type="checkbox" value="y" name="lembrarme" id="lembrarme" checked="checked">
                Permanecer logado
              </label>
            </div>
          </div> -->

          <input type="submit" class="btn" value="Entrar"><br/><br/>
          <a href="/auth/lost_password/">Esqueci minha senha</a><br>
          <a href="#novocadastro" onclick="$('.efetuarlogin').slideUp('fast',function(){ $('.novocadastro').slideDown('fast'); });">Quero me cadastrar</a>

        </fieldset>
      </form>
    </div>
    <div class="span1"><div class="linha-vertical">&nbsp;</div></div>
    <div class="span3">
      <fieldset>
        <legend>ou entrar através de:</legend>
        <a href="/auth/fb"><img src='{{ url_for('.static', filename='imgs/facebook.gif') }}' alt="Facebook Login" title="Facebook Login"/></a>
        <a href="/auth/tw"><img src='{{ url_for('.static', filename='imgs/facebook.gif') }}' alt="Twitter Login" title="Twitter Login"/></a>
      </fieldset>
    </div>
  </div>
  <div class="row novocadastro hide">
    <div class="offset1 span10">
      <form class="form-horizontal" method="post" id="signup" action="{{ url_for('auth.logon') }}">
        <fieldset>
          <legend>Novo cadastro:</legend>

      {{ form.csrf }}
      <div id="auth-error" class="msg error alert alert-error hide"></div>
      <div id="auth-success" class="msg success alert alert-success hide"></div>
      <div class="msg error"></div>
      <div class="msg success"></div>
      <!-- <div class="signup-form"> -->
      {% if form.social %}
      <div class="alert">
        Você está se autenticando através de uma rede social. Para
        terminar o processo falta apenas preencher os campos abaixo.
      </div>
      {% endif %}

        <div class="control-group">
          {{ form.name.label(class='control-label') }}
          <div class="controls">
            {{ form.name(class='span6') }}
          </div>
          <p class="errmsg name-error"></p><br>
        </div>

        <div class="control-group">
          {{ form.email.label(class='control-label')  }}
          <div class="controls">
            {{ form.email(class='span6') }}
          </div>
          <p class="errmsg email-error"></p><br>
        </div>

        <div class="control-group">
          {{ form.email_confirmation.label(class='control-label') }}
          <div class="controls">
            {{ form.email_confirmation(class='span6') }}
          </div>
          <p class="errmsg email_confirmation-error"></p><br>
        </div>

        {% if not form.social %}
        <div class="control-group">
          {{ form.password.label(class='control-label') }}
          <div class="controls">
            {{ form.password }}
          </div>
          <p class="errmsg password-error"></p><br>
        </div>

        <div class="control-group">
          {{ form.password_confirmation.label(class='control-label') }}
          <div class="controls">
            {{ form.password_confirmation }}
          </div>
          <p class="errmsg password_confirmation-error"></p><br>
        </div>
        {% endif %}

        <div class="control-group">
          {{ form.state.label(class='control-label') }}
          <div class="controls">
            {{ form.state }}
          </div>
          <p class="errmsg state-error"></p><br>
        </div>
        <div class="control-group">
          {{ form.city.label(class='control-label') }}
          <div class="controls">
            {{ form.city }}
          </div>

          <p class="errmsg city-error"></p><br>
        </div>

        <div class="control-group">

          <div class="controls">
            <label for="accept_tos" class="checkbox maior"><input type="checkbox" value="y" name="accept_tos" id="accept_tos" checked="checked">Você leu e aceitou nossos <a href="javascript:showTos();">Termos de uso</a>?</label>
            <p class="errmsg accept_tos-error"></p>
          </div>

        </div>

        <div class="control-group">
          <div class="controls">
            <label for="receive_email" class="maior checkbox" class='control-label'>
            <input type="checkbox" value="y" name="receive_email" id="receive_email" checked="checked">
            Quero receber atualizações por email.</label>
            <p class="errmsg receive_email-error"></p>
          </div>
        </div>

        <div class="control-group">
          <div class="controls">
            <label for="receive_sms" class="checkbox maior" class='control-label'>
              <input type="checkbox" value="y" name="receive_sms" id="receive_sms" checked="checked">
              Quero receber atualizações por SMS.
            </label>
            <p class="errmsg receive_sms-error"></p>
          </div>
        </div>


        <h4>Opcional</h4>

        <div class="control-group">
          {{ form.phone.label(class='control-label') }}
          <div class="controls">
            {{ form.phone }}
          </div>
          <p class="errmsg phone-error"></p><br>
        </div>


        <div class="control-group">
          {{ form.gender.label(class='control-label') }}
          <div class="controls">
            {{ form.gender }}
          </div>
          <p class="errmsg gender-error"></p><br>
        </div>

        <div class="control-group">

          {{ form.age_group.label(class='control-label') }}
          <div class="controls">
            {{ form.age_group }}
          </div>

          <p class="errmsg age_group-error"></p><br>

        </div>

        <div class="control-group">
          {{ form.twitter.label(class='control-label') }}
          <div class="controls">
            {{ form.twitter }}
          </div>

          <p class="errmsg twitter-error"></p><br>

        </div>

        <div class="control-group">
          <a href="#login" onclick="$('.novocadastro').slideUp('fast',function(){ $('.efetuarlogin').slideDown('fast'); });">Efetuar login</a>
          <input type="submit" class="btn pull-right" value="Cadastrar">
        </div>

        </fieldset>
      </form>


    </div>
  </div>
</div>
<script type="text/javascript">
$(function(){
  //$('#tab-cadastro a:last').tab('show');
  // $('#signup label').addClass('control-label');
  var hash = window.location.hash;
  if(hash && hash == '#novocadastro'){
    $('.efetuarlogin').slideUp('fast',function(){ $('.novocadastro').slideDown('fast'); });
  }
});
</script>
{% endblock %}
